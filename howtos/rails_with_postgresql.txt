rails new valami --database=postgresql
cd valami
echo "gem 'pg'" >> Gemfile
bundle install


#DO NOT add password for postgres user, but if you want, you can:
add password for postgres user: 
    sudo -u postgres psql
    \password
    \du

update config/database.yml:
    host: localhost
    username: postgres
    password: 

#check pg_hba.conf:
#by default, you don't have to add anything because "postgres" user can do anything
#    local	all	postgres	peer

rake db:create

create a user for postgresql:
    sudo -u postgres createuser --createdb --pwprompt railsapp1

with no password:BBBBBB
    sudo -u postgres createuser --createdb railsapp2
